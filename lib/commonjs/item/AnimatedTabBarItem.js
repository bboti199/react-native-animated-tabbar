"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.AnimatedTabBarItem=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _reactNativeReanimated=_interopRequireWildcard(require("react-native-reanimated"));var _reactNativeGestureHandler=require("react-native-gesture-handler");var _reactNativeRedash=require("react-native-redash");var _styles=require("./styles");var _jsxFileName="/home/boti/Devel/react-native-animated-tabbar/src/item/AnimatedTabBarItem.tsx";var AnimatedRawButton=(0,_reactNativeGestureHandler.createNativeWrapper)(_reactNativeReanimated.default.createAnimatedComponent(_reactNativeGestureHandler.TouchableWithoutFeedback),{shouldCancelWhenOutside:false,shouldActivateOnStart:false});var add=_reactNativeReanimated.default.add,interpolate=_reactNativeReanimated.default.interpolate,useCode=_reactNativeReanimated.default.useCode,set=_reactNativeReanimated.default.set,cond=_reactNativeReanimated.default.cond,eq=_reactNativeReanimated.default.eq;var AnimatedTabBarItemComponent=function AnimatedTabBarItemComponent(props){var index=props.index,selectedIndex=props.selectedIndex,allowFontScaling=props.allowFontScaling,label=props.label,icon=props.icon,background=props.background,labelStyleOverride=props.labelStyle,_props$duration=props.duration,duration=_props$duration===void 0?500:_props$duration,_props$easing=props.easing,easing=_props$easing===void 0?_reactNativeReanimated.Easing.out(_reactNativeReanimated.Easing.exp):_props$easing;var _useValues=(0,_reactNativeRedash.useValues)([0],[]),_useValues2=(0,_slicedToArray2.default)(_useValues,1),labelWidth=_useValues2[0];var minwidth=(0,_react.useMemo)(function(){return 72;},[]);var maxWidth=add(labelWidth,12,minwidth);var animatedFocus=(0,_reactNativeRedash.withTransition)(cond(eq(selectedIndex,index),1,0),{duration:duration,easing:easing});var _panGestureHandler=(0,_reactNativeRedash.panGestureHandler)(),state=_panGestureHandler.state,gestureHandler=_panGestureHandler.gestureHandler;useCode(function(){return cond(eq(state,_reactNativeGestureHandler.State.END),[set(selectedIndex,index),set(state,_reactNativeGestureHandler.State.UNDETERMINED)]);},[selectedIndex,state,index]);var animatedIconColor=(0,_reactNativeRedash.interpolateColor)(animatedFocus,{inputRange:[0,1],outputRange:[icon.inactiveColor,icon.activeColor]});var containerStyle=[_styles.styles.container,{width:interpolate(animatedFocus,{inputRange:[0,1],outputRange:[minwidth,maxWidth]})}];var contentContainerStyle=[_styles.styles.contentContainer,{backgroundColor:(0,_reactNativeRedash.interpolateColor)(animatedFocus,{inputRange:[0,1],outputRange:[background.inactiveColor,background.activeColor]})}];var labelContainerStyle=[_styles.styles.labelContainer,{opacity:interpolate(animatedFocus,{inputRange:[0.33,1],outputRange:[0,1]}),right:interpolate(animatedFocus,{inputRange:[0,1],outputRange:[0,24]})}];var labelStyle=[_styles.styles.label,labelStyleOverride];var handleTextlayout=function handleTextlayout(_ref){var width=_ref.nativeEvent.layout.width;return requestAnimationFrame(function(){return labelWidth.setValue(width);});};var renderIcon=function renderIcon(){return typeof icon.component==='function'?icon.component({color:animatedIconColor}):icon.component;};return _react.default.createElement(AnimatedRawButton,(0,_extends2.default)({},gestureHandler,{__source:{fileName:_jsxFileName,lineNumber:125,columnNumber:5}}),_react.default.createElement(_reactNativeReanimated.default.View,{style:containerStyle,__source:{fileName:_jsxFileName,lineNumber:126,columnNumber:7}},_react.default.createElement(_reactNativeReanimated.default.View,{style:contentContainerStyle,__source:{fileName:_jsxFileName,lineNumber:127,columnNumber:9}},_react.default.createElement(_reactNative.View,{style:_styles.styles.iconContainer,__source:{fileName:_jsxFileName,lineNumber:128,columnNumber:11}},renderIcon())),_react.default.createElement(_reactNativeReanimated.default.View,{style:labelContainerStyle,__source:{fileName:_jsxFileName,lineNumber:130,columnNumber:9}},_react.default.createElement(_reactNativeReanimated.default.Text,{onLayout:handleTextlayout,style:labelStyle,numberOfLines:1,allowFontScaling:allowFontScaling,__source:{fileName:_jsxFileName,lineNumber:131,columnNumber:11}},label))));};var AnimatedTabBarItem=(0,_react.memo)(AnimatedTabBarItemComponent);exports.AnimatedTabBarItem=AnimatedTabBarItem;
//# sourceMappingURL=AnimatedTabBarItem.js.map